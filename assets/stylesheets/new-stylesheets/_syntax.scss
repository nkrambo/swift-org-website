[class^='language-'] .highlight,
.code-box pre {
  position: relative;

  button {
    background-color: #c5c5c5;
    color: white;
    border: 0;
    padding: 5px 8px;
    font-family: sans-serif;
    transition: background-color 0.2s;
    cursor: pointer;
    position: absolute;
    top: 0;
    right: 0;
    display: none;
    border-radius: 0 10px 0 0;

    &:hover {
      background-color: #868686;
    }
  }

  &:hover {
    button {
      display: block;
    }
  }
}

pre.highlight {
  background: var(--color-code-background);
  font-size: 14px;
  line-height: 1.53;
  overflow-x: auto;

  .c,   /* Comment */
  .cm,  /* Comment.Multiline */
  .cp,  /* Comment.Preproc */
  .c1,  /* Comment.Single */
  .cs {
    /* Comment.Special */
    color: var(--color-syntax-comments);
  }

  .k,   /* Keyword */
  .kc,  /* Keyword.Constant */
  .kd,  /* Keyword.Declaration */
  .kp,  /* Keyword.Pseudo */
  .kr,
  .kt, /* Keyword.Reserved */
  .nb {
    /* Name.Builtin */
    color: var(--color-syntax-keywords);
  }

  .nv,  /* Name.Variable */
  .nf {
    /* Name.Function */
    color: var(--color-syntax-project-constants);
  }

  .n {
    color: #B181EC;
  }

  .o, .p {
    color: var(--color-syntax-brackets-dots);
  }

  .s,   /* Literal.String */
  .sb,  /* Literal.String.Backtick */
  .sc,  /* Literal.String.Char >> --color-syntax-characters */
  .sd,  /* Literal.String.Doc */
  .s2,  /* Literal.String.Double */
  .se,  /* Literal.String.Escape */
  .sh,  /* Literal.String.Heredoc */
  .si,  /* Literal.String.Interpol */
  .s1,  /* Literal.String.Single */
  .sx {
    /* Literal.String.Other */
    color: var(--color-syntax-strings);
  }

  .na {
    /* Name.Attribute */
    color: var(--color-syntax-attributes);
  }

  .nc,  /* Name.Class */
  .ni,  /* Name.Entity */
  .no,  /* Name.Constant */
  .vc,  /* Name.Variable.Class */
  .vg,  /* Name.Variable.Global */
  .vi {
    /* Name.Variable.Instance */
    color: var(--color-syntax-other-type-names);
  }

  .err, /* Error */
  .gr,  /* Generic.Error */
  .gt,  /* Generic.Traceback */
  .ne {
    /* Name.Exception */
    color: var(--color-syntax-strings);
  }

  .m,   /* Literal.Number */
  .mf,  /* Literal.Number.Float */
  .mh,  /* Literal.Number.Hex */
  .mi,  /* Literal.Number.Integer */
  .il,  /* Literal.Number.Integer.Long */
  .mo {
    /* Literal.Number.Oct */
    color: var(--color-syntax-numbers);
  }

  .ge {
    /* Generic.Emph */
    font-style: italic;
  }

  .nt {
    /* Name.Tag */
    color: var(--color-syntax-characters);
  }

  .gd,     /* Generic.Deleted */
  .gd .x {
    /* Generic.Deleted.Specific */
    color: var(--color-syntax-plain-text);
    background-color: var(--color-fill-red-secondary);
  }

  .gi,     /* Generic.Inserted */
  .gi .x {
    /* Generic.Inserted.Specific */
    color: var(--color-syntax-plain-text);
    background-color: var(--color-fill-green-secondary);
  }

  .gh, /* Generic.Heading */
  .bp, /* Name.Builtin.Pseudo */
  .go, /* Generic.Output */
  .gp, /* Generic.Prompt */
  .gu, /* Generic.Subheading */
  .w {
    /* Text.Whitespace */
    color: var(--color-syntax-comments);
  }

  .nn {
    /* Name.Namespace */
    color: var(--color-syntax-other-declarations);
  }

  .sr {
    /* Literal.String.Regex */
    color: var(--color-figure-green);
  }

  .ss {
    /* Literal.String.Symbol */
    color: var(--color-syntax-heading);
  }

  /* Make prompts non-selectable, to make it easy to copy and paste */
  .gp {
    -webkit-user-select: none;
    user-select: none;

    & + .w {
      -webkit-user-select: none;
      user-select: none;
    }
  }
}

.language-console {
  color: var(--color-syntax-plain-text);
}

// Explicit syntax highlighting for C++ code blocks:

.language-cpp .cp,
.language-cpp .kt,
.language-cpp .nl,
.language-cpp .o,
.language-c\+\+ .cp,
.language-c\+\+ .kt,
.language-c\+\+ .nl,
.language-c\+\+ .o {
  color: var(--color-syntax-keywords);
}
